---
phase: 06-document-synthesis
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/renderers/render-00-index.ts
  - src/renderers/render-01-overview.ts
  - src/renderers/render-02-getting-started.ts
  - src/renderers/render-04-file-structure.ts
  - src/renderers/render-07-dependencies.ts
  - src/renderers/render-10-tech-debt.ts
  - src/renderers/render-12-testing.ts
autonomous: true

must_haves:
  truths:
    - "00-INDEX.md renderer produces a master index with status indicators per document"
    - "01-PROJECT-OVERVIEW.md renderer produces what/who/why summary from Round 1 data"
    - "02-GETTING-STARTED.md renderer produces clone/install/run guide from Round 1 + Round 6"
    - "04-FILE-STRUCTURE.md renderer produces annotated directory tree from Round 1 + Round 2 + static file tree"
    - "07-DEPENDENCIES.md renderer produces dependency analysis with why/alternatives from Round 1 + static deps"
    - "10-TECH-DEBT.md renderer produces prioritized TODO/FIXME/HACK list from Round 5 + static todos"
    - "12-TESTING.md renderer produces test strategy overview from Round 5 + static test data"
    - "Each renderer produces YAML front-matter, 2-sentence summary, and cross-references"
  artifacts:
    - path: "src/renderers/render-00-index.ts"
      provides: "INDEX renderer with document status table"
      exports: ["renderIndex"]
    - path: "src/renderers/render-01-overview.ts"
      provides: "Project overview renderer"
      exports: ["renderOverview"]
    - path: "src/renderers/render-02-getting-started.ts"
      provides: "Getting started guide renderer"
      exports: ["renderGettingStarted"]
    - path: "src/renderers/render-04-file-structure.ts"
      provides: "File structure renderer"
      exports: ["renderFileStructure"]
    - path: "src/renderers/render-07-dependencies.ts"
      provides: "Dependencies renderer with mermaid diagram"
      exports: ["renderDependencies"]
    - path: "src/renderers/render-10-tech-debt.ts"
      provides: "Tech debt and TODOs renderer"
      exports: ["renderTechDebt"]
    - path: "src/renderers/render-12-testing.ts"
      provides: "Testing strategy renderer"
      exports: ["renderTesting"]
  key_links:
    - from: "src/renderers/render-00-index.ts"
      to: "src/renderers/types.ts"
      via: "DocumentStatus import for status table"
      pattern: "DocumentStatus"
---

<objective>
Implement 7 document renderers (batch 1): the master INDEX plus 6 documents that render well with static data and simpler AI round needs (overview, getting-started, file-structure, dependencies, tech-debt, testing).

Purpose: These documents have the richest static analysis fallback data and simpler AI round dependencies (mostly R1 + one other round), making them natural candidates for the first batch. The INDEX renderer is special -- it receives DocumentStatus[] from all other renderers.

Output: 7 renderer files (registry wiring deferred to plan 04).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-document-synthesis/06-RESEARCH.md
@.planning/phases/06-document-synthesis/06-01-SUMMARY.md
@src/renderers/types.ts
@src/renderers/utils.ts
@src/renderers/mermaid.ts
@src/renderers/audience.ts
@src/renderers/registry.ts
@src/ai-rounds/schemas.ts
@src/analyzers/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement INDEX, Overview, Getting Started, and File Structure renderers</name>
  <files>src/renderers/render-00-index.ts, src/renderers/render-01-overview.ts, src/renderers/render-02-getting-started.ts, src/renderers/render-04-file-structure.ts</files>
  <action>
    All renderers follow the same pattern established in research: `lines: string[]` array, push content, join with `\n`. Each renderer imports shared utilities from `./utils.js`, types from `./types.js`, and audience helpers from `./audience.js`. Every renderer is a single exported function that receives `RenderContext` and returns `string`.

    **src/renderers/render-00-index.ts** -- `renderIndex(ctx: RenderContext, statuses: DocumentStatus[]): string`

    INDEX is special: it takes an extra `statuses` parameter containing the status of all other documents.

    Content:
    - YAML front-matter via buildFrontMatter (category: 'index')
    - Title: `# Handover Knowledge Base`
    - 2-sentence summary (DOC-17): "{projectName} knowledge base generated on {date}. This index links to all {N} documents covering architecture, features, modules, dependencies, and more."
    - Section: `## Documents` -- table with columns: #, Document, Status. Each row links to the document (if generated) or shows plain text (if not generated). Status column shows: Complete, Partial (static analysis only), Static Only, Not Generated.
    - Section: `## Generation Details` -- audience mode, rounds used, generation timestamp, handover version.
    - If audience === 'ai': add structuredBlock with metadata (document_count, generated_count, statuses array).

    Per locked decision: INDEX shows status per document (complete, partial, static-only).

    **src/renderers/render-01-overview.ts** -- `renderOverview(ctx: RenderContext): string`

    Primary data: ctx.rounds.r1?.data (Round1Output). Fallback: static analysis metadata.

    Content:
    - YAML front-matter (category: 'overview')
    - Title: `# Project Overview`
    - 2-sentence summary: "{projectName} is a {purpose}. Built with {primaryLanguage}, it {technicalLandscape}."
    - Section: `## What This Project Does` -- ctx.rounds.r1?.data.purpose or fallback from config.context
    - Section: `## Technical Landscape` -- primaryLanguage, framework, projectScale
    - Section: `## Key Dependencies` -- table of keyDependencies (name, role)
    - Section: `## Entry Points` -- list of entryPoints with codeRef() for paths
    - Section: `## Key Findings` -- bullet list of findings
    - Section: `## Open Questions` -- bullet list of openQuestions (if any)
    - Cross-references: link to Architecture (03), File Structure (04), Getting Started (02)
    - If no R1 data: render with static analysis only (file counts, dep counts, language breakdown) with warning banner: `> **Note:** AI analysis was unavailable. Content is based on static analysis only.`

    **src/renderers/render-02-getting-started.ts** -- `renderGettingStarted(ctx: RenderContext): string`

    Primary data: R1 (overview/entry points) + R6 (deployment/build). Fallback: static deps + env.

    Content:
    - YAML front-matter (category: 'guide')
    - Title: `# Getting Started`
    - 2-sentence summary: "Get {projectName} running locally in under 5 minutes. This guide covers prerequisites, installation, and first run."
    - Section: `## Prerequisites` -- derive from language (Node.js version from engines, Python version, etc.), package manager
    - Section: `## Installation` -- clone URL (from git if available), install command (npm install, pip install, etc.)
    - Section: `## Running the Project` -- build commands from R6 buildProcess, or entry points from R1
    - Section: `## Project Structure Quick Reference` -- brief pointer to file structure doc, list top-level dirs
    - Section: `## Environment Setup` -- cross-ref to Environment doc (08), list required env vars from R6 or static env
    - Cross-references: link to Environment (08), File Structure (04), Dependencies (07)

    **src/renderers/render-04-file-structure.ts** -- `renderFileStructure(ctx: RenderContext): string`

    Primary data: static analysis fileTree + R1 + R2 (module info for annotations). Fallback: static file tree.

    Content:
    - YAML front-matter (category: 'structure')
    - Title: `# File Structure`
    - 2-sentence summary: "{projectName} contains {totalFiles} files across {totalDirs} directories. This document maps every directory and key file to its purpose."
    - Section: `## Overview` -- total files, dirs, lines, size (from fileTree)
    - Section: `## Directory Tree` -- render directoryTree as indented tree. If R2 module data available, annotate directories with their module purpose.
    - Section: `## File Distribution` -- table of files by extension (from filesByExtension)
    - Section: `## Largest Files` -- table of largestFiles with codeRef()
    - Cross-references: link to Architecture (03), Modules (06)

    For all renderers: check if primary round data exists. If not, add warning banner and render with available static data. Use codeRef() for ALL file path references. Use crossRef() for ALL inter-document links.

  </action>
  <verify>
    Run `npx tsc --noEmit` to verify no type errors.

    Run `npx tsx --eval "import { renderOverview } from './src/renderers/render-01-overview.js'; console.log(typeof renderOverview)"` -- should output 'function'.
  </verify>
  <done>
    INDEX renderer produces document status table with links. Overview renderer produces project summary from R1 data with static fallback. Getting Started renderer produces quickstart guide from R1+R6 data. File Structure renderer produces annotated tree from static file tree + R2 module data. All renderers include YAML front-matter, 2-sentence summary, cross-references, and audience-aware blocks.
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement Dependencies, Tech Debt, and Testing renderers</name>
  <files>src/renderers/render-07-dependencies.ts, src/renderers/render-10-tech-debt.ts, src/renderers/render-12-testing.ts</files>
  <action>
    **src/renderers/render-07-dependencies.ts** -- `renderDependencies(ctx: RenderContext): string`

    Primary data: R1 keyDependencies + static dependencies data. This is one of the 4 docs with mermaid diagrams.

    Content:
    - YAML front-matter (category: 'dependencies')
    - Title: `# Dependencies`
    - 2-sentence summary: "{projectName} depends on {totalDeps} packages across {manifestCount} manifests. This document explains why each dependency exists and its role."
    - Section: `## Production Dependencies` -- table: Name, Version, Role (from R1 keyDependencies merged with static dependency versions). If AI enrichment unavailable, just show name/version/type from static.
    - Section: `## Development Dependencies` -- same format, filtered by type === 'development'
    - Section: `## Peer/Optional Dependencies` -- if any exist
    - Section: `## Package Manifests` -- list each manifest file with codeRef()
    - Section: `## Warnings` -- any dependency warnings from static analysis
    - Section: `## Diagrams` -- buildDependencyDiagram(ctx) from mermaid.ts. Place at END per locked decision.
    - Cross-references: link to Architecture (03), Getting Started (02), Deployment (13)
    - If audience === 'ai': structuredBlock per dependency section

    **src/renderers/render-10-tech-debt.ts** -- `renderTechDebt(ctx: RenderContext): string`

    Primary data: R5 edge cases/findings + static todo items. This doc renders well with static-only data.

    Content:
    - YAML front-matter (category: 'tech-debt')
    - Title: `# Tech Debt & TODOs`
    - 2-sentence summary: "{projectName} has {totalTodos} tracked items across {categoryCount} categories. This document prioritizes every TODO, FIXME, HACK, and technical debt marker."
    - Section: `## Summary` -- table of categories with counts (from static todos.summary.byCategory)
    - Section: `## Items by Category` -- for each category (bugs, debt, tasks, notes, optimization): subheading, table with columns: Marker, Text, File (codeRef), Line, Issue Refs. Sort by severity/category.
    - Section: `## AI Insights` (if R5 available) -- pull relevant findings from R5 modules' edge cases and findings that relate to tech debt
    - Cross-references: link to Edge Cases (09), Conventions (11)
    - If no R5 data: omit AI Insights section, no warning banner needed since static data is sufficient.

    **src/renderers/render-12-testing.ts** -- `renderTesting(ctx: RenderContext): string`

    Primary data: R5 (testing conventions) + static test data. Renders well with static-only data.

    Content:
    - YAML front-matter (category: 'testing')
    - Title: `# Testing Strategy`
    - 2-sentence summary: "{projectName} uses {frameworks} for testing with {totalTests} tests across {totalTestFiles} files. This document covers test organization, coverage, and identified gaps."
    - Section: `## Frameworks` -- list detected frameworks, config files (with codeRef)
    - Section: `## Test Files` -- table: Path (codeRef), Framework, Test Count. Cap at 50 rows with "and N more..." note.
    - Section: `## Coverage` -- if coverageDataPath exists, note it. Otherwise, state no coverage data found.
    - Section: `## Test Organization` -- summarize test file distribution (unit vs integration vs e2e based on path patterns)
    - Section: `## AI Insights` (if R5 available) -- pull testing-related conventions and error handling patterns from R5
    - Cross-references: link to Conventions (11), Edge Cases (09)

    NOTE: Registry wiring for these 7 renderers is handled in plan 04 (Wave 3) to avoid parallel write conflicts with plan 03.

  </action>
  <verify>
    Run `npx tsc --noEmit` to verify no type errors.

    Run `npx tsx --eval "import { renderDependencies } from './src/renderers/render-07-dependencies.js'; import { renderTechDebt } from './src/renderers/render-10-tech-debt.js'; import { renderTesting } from './src/renderers/render-12-testing.js'; console.log(typeof renderDependencies, typeof renderTechDebt, typeof renderTesting)"` -- should output 'function function function'.
  </verify>
  <done>
    Dependencies renderer produces dependency analysis with production/dev split and mermaid diagram. Tech Debt renderer produces categorized TODO/FIXME/HACK list from static analysis with optional AI insights. Testing renderer produces test strategy overview with framework detection. All 3 renderer files created and export their render functions.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. All 7 renderer files exist in src/renderers/
3. Each renderer exports a single function returning string
4. Each renderer produces content with YAML front-matter (starts with ---)
5. Each renderer includes cross-references via crossRef()
6. Each renderer uses codeRef() for file path references
7. All 7 render functions importable from their respective files
</verification>

<success_criteria>
Batch 1 of document renderers is complete: INDEX provides the master document status table, and 6 documents (overview, getting-started, file-structure, dependencies, tech-debt, testing) render from their data sources with static-only fallback capability. All renderers follow the lines.push() pattern, include YAML front-matter, 2-sentence summaries, cross-references, and audience-aware blocks. Registry wiring is deferred to plan 04.
</success_criteria>

<output>
After completion, create `.planning/phases/06-document-synthesis/06-02-SUMMARY.md`
</output>
