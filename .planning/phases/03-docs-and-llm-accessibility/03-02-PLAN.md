---
phase: 03-docs-and-llm-accessibility
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/contributor/architecture.md
  - docs/contributor/development.md
  - docs/contributor/adding-providers.md
  - docs/contributor/adding-analyzers.md
autonomous: true

must_haves:
  truths:
    - 'A contributor can read architecture.md and understand the full flow of a handover run from CLI entry to output files'
    - 'A contributor can follow development.md to go from git clone to a passing build and submitted PR'
    - 'A contributor can follow adding-providers.md step-by-step to implement a new LLM provider'
    - 'A contributor can follow adding-analyzers.md step-by-step to implement a new static analyzer'
  artifacts:
    - path: 'docs/contributor/architecture.md'
      provides: 'End-to-end narrative walkthrough of a handover run'
      contains: 'DAGOrchestrator'
    - path: 'docs/contributor/development.md'
      provides: 'Full local dev workflow from clone to PR'
      contains: 'npm run build'
    - path: 'docs/contributor/adding-providers.md'
      provides: 'Step-by-step provider implementation guide'
      contains: 'BaseProvider'
    - path: 'docs/contributor/adding-analyzers.md'
      provides: 'Step-by-step analyzer implementation guide'
      contains: 'coordinator'
  key_links:
    - from: 'docs/contributor/architecture.md'
      to: 'src/cli/index.ts'
      via: 'entry point reference'
      pattern: "src/cli/index\\.ts"
    - from: 'docs/contributor/adding-providers.md'
      to: 'src/providers/base-provider.ts'
      via: 'base class to extend'
      pattern: 'BaseProvider'
    - from: 'docs/contributor/adding-providers.md'
      to: 'src/providers/presets.ts'
      via: 'preset registration'
      pattern: "presets\\.ts"
---

<objective>
Create the docs/contributor/ folder with four contributor-facing documentation files: an architecture narrative walkthrough, a development workflow guide, and two step-by-step extension tutorials (adding providers, adding analyzers).

Purpose: Contributors who want to extend or improve handover can understand the system and follow guided tutorials — satisfying Phase 3 success criterion #2.
Output: Four markdown files in docs/contributor/
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-docs-and-llm-accessibility/03-CONTEXT.md
@.planning/phases/03-docs-and-llm-accessibility/03-RESEARCH.md
@AGENTS.md
@PRD.md
@src/cli/index.ts
@src/cli/generate.ts
@src/config/loader.ts
@src/config/schema.ts
@src/analyzers/coordinator.ts
@src/orchestrator/dag.ts
@src/providers/base-provider.ts
@src/providers/factory.ts
@src/providers/presets.ts
@src/renderers/render-template.ts
@src/ai-rounds/
@src/context/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create architecture.md and development.md</name>
  <files>docs/contributor/architecture.md, docs/contributor/development.md</files>
  <action>
Create `docs/contributor/` directory.

**architecture.md:** Narrative walkthrough style (locked decision: "A handover run starts at X, flows through Y, outputs Z"). Extract relevant content from AGENTS.md and PRD.md, then REWRITE for human readers (locked decision: extract-and-rewrite, not copy-paste). Structure:

1. H1 "Architecture"
2. H2 "Overview" — one-paragraph summary: CLI tool that runs static analysis, packs context, executes LLM rounds via DAG, renders documents
3. H2 "How a handover run works" — the narrative walkthrough. Follow this flow (from research):
   - Entry: `src/cli/index.ts` (Commander.js) → `runGenerate()` in `src/cli/generate.ts`
   - Config loading: `src/config/loader.ts` (precedence: CLI > env > .handover.yml > defaults)
   - Static analysis: 8 concurrent analyzers via `src/analyzers/coordinator.ts` — list all 8: FileTree, DepGraph, GitHistory, TodoScan, EnvScan, AST, Tests, Docs
   - Context packing: `src/context/` — scores files by relevance, packs to token budget
   - DAG orchestration: `src/orchestrator/dag.ts` — Kahn's topological sort, declares dependencies as string arrays
   - AI rounds: 6 rounds in `src/ai-rounds/` — rounds 1-4 and 6 use StandardRoundConfig factory, round 5 is fan-out
   - Each round calls `BaseProvider.complete()` with retry + rate-limit
   - Rendering: 14 renderers in `src/renderers/` — `renderDocument()` template handles front-matter, cross-references
   - Output: `handover/*.md`
4. H2 "Key patterns" — brief descriptions of: Zod-first types, Template Method providers, Config+Factory rounds, DAG orchestration, three-tier error handling. Reference file paths (e.g., `src/domain/schemas.ts`) but NOT line numbers.
5. H2 "Directory structure" — the src/ tree from AGENTS.md with one-liner descriptions

Read `src/cli/index.ts`, `src/cli/generate.ts`, `src/analyzers/coordinator.ts`, `src/orchestrator/dag.ts`, `src/ai-rounds/`, and `src/renderers/` to trace the actual flow and ensure accuracy. Do NOT guess — verify against code.

**development.md:** Full local dev workflow (locked decision: clone to PR, including debugging and running specific tests). Structure:

1. H1 "Development"
2. H2 "Prerequisites" — Node >= 18, npm, git, an LLM API key (for integration tests)
3. H2 "Setup" — git clone, cd, npm install, npm run build (verify it builds)
4. H2 "Development workflow" — npm run dev, how to run a handover generate in dev mode, how to iterate
5. H2 "Testing" — `npm test` for unit, `HANDOVER_INTEGRATION=1 npm test` for integration. How to run specific test files: `npm test -- path/to/test.test.ts`. Note: integration tests require a real LLM API key.
6. H2 "Linting and formatting" — `npm run lint`, `npm run format`, pre-commit hooks (husky + lint-staged auto-fix on staged files), commitlint enforces conventional commits
7. H2 "Building" — `npm run build` (tsup → dist/), `npm run typecheck` (tsc --noEmit)
8. H2 "Submitting a PR" — conventional commit format, PR template checklist, CI checks that run (lint, typecheck, test, build on Node 20+22)
9. H2 "Debugging" — how to use tsx for dev mode, how to run with verbose logging if available
   </action>
   <verify>

- Both files exist: `ls docs/contributor/architecture.md docs/contributor/development.md`
- architecture.md mentions all 8 analyzers, 6 AI rounds, 14 renderers, and the DAG orchestrator
- architecture.md references real file paths that exist in src/
- development.md includes clone-to-PR workflow with all commands
  </verify>
  <done>architecture.md tells the story of a handover run end-to-end with accurate file path references; development.md covers the full clone-to-PR workflow including testing, linting, and debugging</done>
  </task>

<task type="auto">
  <name>Task 2: Create adding-providers.md and adding-analyzers.md</name>
  <files>docs/contributor/adding-providers.md, docs/contributor/adding-analyzers.md</files>
  <action>
**adding-providers.md:** Step-by-step tutorial format (locked decision: walk through building one from scratch). Read `src/providers/base-provider.ts`, `src/providers/factory.ts`, and `src/providers/presets.ts` to understand the actual extension points. Also read one concrete provider implementation (e.g., the OpenAI-compatible provider) as a reference. Structure:
1. H1 "Adding a provider"
2. Brief intro: handover uses a Template Method pattern — BaseProvider handles retry/rate-limiting, you implement the completion call
3. H2 "Step 1: Create the provider class" — create a new file in `src/providers/`, extend BaseProvider, implement `doComplete()` and `isRetryable()`. Show a skeleton with comments explaining each method.
4. H2 "Step 2: Add the preset" — add entry to `src/providers/presets.ts` with: key name, env var, default model, base URL, SDK type
5. H2 "Step 3: Register in the factory" — update `src/providers/factory.ts` to handle the new provider key (read factory.ts to understand how — it may be automatic from presets)
6. H2 "Step 4: Update the config schema" — add the provider name to the provider enum in `src/config/schema.ts`
7. H2 "Step 5: Test" — how to test the new provider (set env var, run with --provider flag)
8. Reference real file paths, not line numbers. Show actual code patterns from existing providers.

**adding-analyzers.md:** Step-by-step tutorial format. Read `src/analyzers/coordinator.ts` and one existing analyzer to understand the interface. Structure:

1. H1 "Adding an analyzer"
2. Brief intro: handover runs 8 static analyzers concurrently — each examines a different dimension of the codebase
3. H2 "Step 1: Create the analyzer file" — new file in `src/analyzers/`, implement the analyzer function matching the coordinator's expected interface. Show skeleton.
4. H2 "Step 2: Register with the coordinator" — add to `src/analyzers/coordinator.ts` in the concurrent execution group
5. H2 "Step 3: Define the output schema" — add Zod schema to `src/domain/schemas.ts` if the analyzer produces new structured data (per Zod-first pattern)
6. H2 "Step 4: Wire to renderers" — if the analyzer data feeds a specific renderer, update the renderer to consume it
7. H2 "Step 5: Test" — run handover and verify the analyzer output appears
8. Reference real file paths. Show actual patterns from existing analyzers.

IMPORTANT: Read the actual source files before writing these guides. Do NOT write guides based on assumptions — verify every file path, every interface, every registration pattern against the real code. If something works differently than expected, document what actually exists.
</action>
<verify>

- Both files exist: `ls docs/contributor/adding-providers.md docs/contributor/adding-analyzers.md`
- adding-providers.md references BaseProvider, presets.ts, factory.ts, and schema.ts
- adding-analyzers.md references coordinator.ts and the Zod schema pattern
- Both use step-by-step numbered format
- All referenced file paths exist in the codebase
  </verify>
  <done>adding-providers.md walks through building a new provider from scratch with accurate code patterns from existing providers; adding-analyzers.md walks through building a new analyzer with accurate registration and schema patterns</done>
  </task>

</tasks>

<verification>
1. `ls docs/contributor/` shows 4 files: architecture.md, development.md, adding-providers.md, adding-analyzers.md
2. architecture.md follows narrative walkthrough style (not reference/list style) per locked decision
3. Extension docs use step-by-step tutorial format per locked decision
4. All file paths referenced in docs exist in the codebase (spot-check 5+ paths)
5. No line numbers appear in any file references per locked decision
6. Content is rewritten for human readers, not copy-pasted from AGENTS.md or PRD.md per locked decision
</verification>

<success_criteria>

- A contributor reading architecture.md understands the CLI → config → analyzers → context → DAG → rounds → renderers → output flow
- A contributor reading development.md can go from zero to a passing build and submitted PR
- A contributor reading adding-providers.md can implement a new LLM provider without asking clarifying questions
- A contributor reading adding-analyzers.md can implement a new static analyzer without asking clarifying questions
  </success_criteria>

<output>
After completion, create `.planning/phases/03-docs-and-llm-accessibility/03-02-SUMMARY.md`
</output>
